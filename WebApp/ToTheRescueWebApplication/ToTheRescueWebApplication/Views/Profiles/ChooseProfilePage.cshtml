@model ToTheRescueWebApplication.Models.ProfilesModel

@{
    ViewBag.Title = "ChooseProfile";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    #ChooseProfileheader {
        text-align: center;
    }

    #ProfileNames {
        font-size: 32px;
        font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
    }

    #DeleteProfileButton {
        border-radius: 10px;
        position: relative;
        left: 0%;
        visibility: hidden;
    }

    #CreateNewPorifleButton {
        border-radius: 10px;
        position: relative;
        left: 35%;
        visibility: visible;
    }

    #PlayButton {
        border-radius: 10px;
        position: relative;
        left: 67%;
        visibility: hidden;
    }

    h6 {
        position: relative;
        left: 42%;
    }
</style>


<body id="ChooseProfileBody">
    <h1 id="ChooseProfileheader">Choose Your Profile!</h1>
    <br />


    <table id="ProfilesTable" , style="width:100%">
        @if (Model.GetProfileNamesForASpecificUser().Count() < 4)
        {
            <tr id="RowOneProfiles">
                @for (int i = 0; i < Model.GetProfileNamesForASpecificUser().Count(); i++)
                {
                    var base64 = Convert.ToBase64String(Model.GetAllProfileAvatarsForASpecificUser()[i]);
                    var imgSrc = String.Format("data:image/jpg;base64,{0}", base64);
                    <td>
                        <div id="@("Profile"+i)" , onclick="ToggleColor(@i.ToString())">
                            <text id="ProfileNames">@Model.GetProfileNamesForASpecificUser()[i]</text>
                            <img id="Avatar" , src="@imgSrc" />
                        </div>
                    </td>
                }
            </tr>
        }
        else
        {
            int i = 0;
            <tr id="RowOneProfiles">
                @for (i = 0; i < 4; i++)
                {
                    var base64 = Convert.ToBase64String(Model.GetAllProfileAvatarsForASpecificUser()[i]);
                    var imgSrc = String.Format("data:image/jpg;base64,{0}", base64);
                    <td>
                        <div id="@("Profile"+i)" , onclick="ToggleColor(@i.ToString())">
                            <text id="ProfileNames">@Model.GetProfileNamesForASpecificUser()[i]</text>
                            <img id="Avatar" , src="@imgSrc" />
                        </div>
                    </td>
                }
            </tr>
            <tr id="RowTwoProfiles">
                @for (int x = i; x < Model.GetProfileNamesForASpecificUser().Count(); x++)
                {
                    var base64 = Convert.ToBase64String(Model.GetAllProfileAvatarsForASpecificUser()[x]);
                    var imgSrc = String.Format("data:image/jpg;base64,{0}", base64);
                    <td>
                        <div id="@("Profile"+x)" , onclick="ToggleColor(@x.ToString())">
                            <text id="ProfileNames">@Model.GetProfileNamesForASpecificUser()[x]</text>
                            <img id="Avatar" , src="@imgSrc" />
                        </div>
                    </td>
                }
            </tr>
        }
    </table>

    <button id="DeleteProfileButton">Delete Profile</button>
    @*<form id="DeleteProfileForm">
        Password:
        <input type="password" , name="password" />
    </form>*@
    <button id="CreateNewPorifleButton">Create New Profile</button>
    <button id="PlayButton">Play</button>
    
    <br />
    <h6>*Only 8 profiles per user permitted.</h6>

    <script type="text/javascript">
        function ToggleColor(id) {
            var ProfileID = "Profile";
            ProfileID = ProfileID.concat(id);
            var profileDiv = document.getElementById(ProfileID);

            //toggle the color of all the profile names
            if (profileDiv.style.color !== "red") {
                profileDiv.style.color = "red";
            }
            else {
                profileDiv.style.color = "black";
            }

            //ensure all the other profile namees are black
            for (var i = 0; i < 8; i++) {
                if (i != id) {
                    var tempProfID = "Profile";
                    tempProfID = tempProfID.concat(i.toString());
                    document.getElementById(tempProfID).style.color = "black";
                }
            }
            DisplayButtons();
        }

        function DisplayButtons() {
            var visible = false;

            for (var i = 0; i < 8; i++) {
                var tempProfID = "Profile";
                tempProfID = tempProfID.concat(i.toString());
                tempProfID = document.getElementById(tempProfID)
                if (tempProfID.style.color === "red")
                {
                    visible = true;
                }
            }
            if (visible === true)
            {
                document.getElementById("PlayButton").style.visibility = "visible";
                document.getElementById("DeleteProfileButton").style.visibility = "visible";
            }
            else
            {
                document.getElementById("PlayButton").style.visibility = "hidden";
                document.getElementById("DeleteProfileButton").style.visibility = "hidden";
            }
        }
    </script>

    <br />
    <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
</body>