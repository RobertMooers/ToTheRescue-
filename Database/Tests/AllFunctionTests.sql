/**********************************************************************
* Purpose: Tests the GetPrevMiniGames function.
  Should return last three minigames played for profile (or fewer if user
  hasn't played three games)
***********************************************************************/
--DROP TABLE #temp

CREATE TABLE #temp(MiniGameID INT)INSERT INTO #temp
VALUES (2), (14), (16)

IF(SELECT COUNT(*) AS UnMatchedIDs
FROM dbo.GetPrevMiniGames(4) AS retTable
	FULL OUTER JOIN (SELECT *
	   	  FROM #temp) AS expected ON (retTable.MiniGameID = expected.MiniGameID)
WHERE (retTable.MiniGameID IS NULL) OR (expected.MiniGameID IS NULL))
	 > 0	PRINT 'Failure, didn''t return correct MiniGameIDs'ELSE	PRINT 'Success, correct MiniGameIDs returned'
DROP TABLE #temp; --drop temp table
	PRINT '-----------------------------------------------------------'

/**********************************************************************
* Purpose: Tests the GetMapNodes function
  Should return rows for all nodes for map
***********************************************************************/
--DROP TABLE #temp

CREATE TABLE #temp(NodeID INT, XCoordinate INT, YCoordinate INT)
INSERT INTO #temp
VALUES(1, 18, 5),(2, 15, 14),(3, 5, 8),(4, 5, 17),(5, 12, 7),(6, 7, 16);

IF(SELECT COUNT(*) AS UnMatchedNodes
FROM dbo.GetMapNodes(1) AS retTable
	FULL OUTER JOIN (SELECT *
	   	  FROM #temp) AS expected ON (retTable.NodeID = expected.NodeID AND retTable.XCoordinate = expected.XCoordinate
										AND retTable.YCoordinate = expected.YCoordinate)
WHERE (retTable.NodeID IS NULL OR retTable.XCoordinate IS NULL OR retTable.YCoordinate IS NULL) OR 
		(expected.NodeID IS NULL OR expected.XCoordinate IS NULL OR expected.YCoordinate IS NULL))
	 > 0	PRINT 'Failure, didn''t return correct MiniGameNodes'ELSE	PRINT 'Success, correct MiniGameNodes returned'
DROP TABLE #temp; --drop temp table
	PRINT '-----------------------------------------------------------'

/********************************************************************************
* Purpose: Tests the GetMapMedia function.
  Should return background sound and background image for map
####THIS ONLY CHECKS IMAGE, SOUND VARBIN IS TOO LONG TO INSERT IN SQL STUDIO###
*********************************************************************************/
--DROP TABLE #tempCREATE TABLE #temp([Images] VARBINARY(MAX), Sound VARBINARY(MAX))INSERT INTO #temp
VALUES(0xFFD8FFE000104A46494600010100000100010000FFDB008400090607121010150F101210101010101510151615150F101515101515161617151518181D2820181A251B151521312125292B2E2E2E171F3338332D37282D2E2B010A0A0A0E0D0E1A1010182B1F201D2D2D2D2B2D2D2B2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2D2DFFC000110800C1010603011100021101031101FFC4001C0000010501010100000000000000000000000102030405060708FFC4003E100001040102030506040405030500000001000203111204210531410651617191132281A1B1C1143242D1072333F062728292E14352F12434536373FFC4001B01010002030101000000000000000000000001040203050607FFC4002B11000202020104020103050101000000000001021103041205213141135122326171142333428191F0FFDA000C03010002110311003F00BD8AF5C7CFA83141418A0A0C505062828314014A2C5315B192680249E8028724BD992C727E11ABA5ECF4AFDCD3078EE7D1569EE423E0BB8BA7E49F9EC69C3D931FA9CE3E83ECAB4B7DFA2EC3A4AF6CB4DECAC7DCEF52B53DF99BD74A80A7B2B1771F528B7E61F4AC7F4579BB26DE85E3E20FD96C8F507ECD52E931F466EABB372377690EF3D8AB10DD8BF253C9D37247C191340E61C5C0B4F8AB719A92B473E78E5075243315918D0628283141418A58A0C52C50629628314B1418A0A0C52C50629628314B1418A58A0C52C506296283141418A0A0C52C506296289296267414828290505258A2E70FE1AE98EDB37BFF0065A32E758D16306ACB2B3A6D1766E31CC647C77F92E764DD93F07670F4D82F2ACD58B84B072681F00AB3D893F65E8E9C17A2C33400745ADE666D5AD15E89D9A7016B736CDAB1A44A18163667C45C52C9A0C52C5085812C511BE00564A7461282666EBB8332514E6DD6E3985631EC4A1E194F36943279466C9D978BA023E25585BD329CBA5E3F451D4765ABF2B9C3CE8ADF0DEFB2AE4E955E198DACE19245F9858EF1BFAAB98F3C67E0E7E5D59E3F28A74B715E8290506282829050520A0A41414828290506282829050520A0A4141482829050520A25C56366418A580C52C0629628EC38016FB36D777CFAAE46CDF267A1D1E3C551D1C4452E7BB3AF1AA2458998AA090400801002004008010094A6C8A237B42C9598B48CAE221B4792B586ECA1B0A34CE1752D19BB1E566976E0DF1EE799C897274478AC8D61480314018A00C500628031401480314018A00C500628031424314209315899D0520A0A41414828B3A2D5BE236DE5D4745AF2628CD773761CD2C4FB1BFA4ED0B7F55B4FA8F92A1934DFA3AD8BA8C7C3EC6BE978AB1FB07349F316AA4F5E51F28BF8F6E12F0CD08E50568712DA9263D92037441A346BA11D0AD768CACA1C178B3354C73D9FA257C7CEFF0029D8FC4515AB0E65953AF44466A468ADC640801002004208E47D2C923172A31B8C714F64DB1B9BA02E95BC1839B39FB5B5F1AB472BACE2524BB1343B87DD7571E08C0E165D99E42952DC56A0A41414828314141482829050520A0A4141482829050629628314B1414828314141482893158D9985258A0A4B1414960292C05258A1CC241B1B11BA869354C94DC5DA3674BDA0C05CBB003770FD973B6B0C31C1CDBEC8EA6BEECAD268E4357DA19DCF98C723E364F26640A0796237E636039772F0B976E6E52E2E932FFC9213B37C6DDA4943F77465D6F68E6762DB1E34E2A35B65E19DFAF64C26E2CF55D1F168A56B5D1BDAE0F048DC5EDCF6E7B755E971CE1912717E4B6B2A65AFC405B78327E4421D4053C18F910C76AC29F8D98BCA915A7E24D6F320799A5B2381B34CF6A2BD991ADE3EDE4DB71F41EAADE3D47ECE7E6DF5FEBDCE7F55A8748EB71F21D02BF08282EC72B2E496476C87159D9AE8292C50629628292C052580A4B1418A58A0C52C506296287C5039E69AD2E3E0B194D47CB3386394FC22EC5C16671FC957D490B4CB6B1AF6588E8E56FC1ABA7ECB6DEFB8FC365565BEFD17A1D2BED933BB2CCE85DEAB05BF2363E950FB33B5DD9D7B05B0E6074EBF056716EC64FB94F374E9C15AEE643E170E6D23CC10AD29C5F865178E4BCA194B2B30A24C56265418A0A0C5050628283141418A58A2333303B12E687775805577B98633E0E4ACCFE393569185C4F52EF68F6DFBBB36BA56C578CEABBD9259E704FF001F074F0628A8A7ECA0B8A590404B0EA1CC20B4918DD7C798F8D2DB8F2CB1B4D7A075FC3F8D4D2461C5C2F70680E9F05EEFA6CE3B3814E4BB9CFCD9B242549939E232FF00DE7D1BFB2E87C10FA347F5397EC8DFA990F37BBD564B1C17A307966FD90916B3EC8D6DB7E44C508A1714142628285C54D8A1314B1418A81418A0A0C52C9A0C52C50629645062964D1DB705823118C6B92E36C4A5CBB9E8F4E18F82A350342AADB2F521CA0C810085B6A6C869321974ED23701671C8D1AA58A2D774721DA0D3318F185027981F55D5D59CA51EE7077714232FC4CEA566CA541496284C52C5062A6C13C3A37BFF002B49F1E416B9658C7CB36C304E5E10ED7688C1199A52D631BE24927A003A95533EFE2C517291BD694FD9C0EA26CDEE77FDCE25783D8CAF2E594FED97E11E31488F25A0C85C9280B928A0192502DF0DD4B9923434D0738023A104D2E8F4DD9C9873C545F66FB9A7363528BB3ACC57D05339142E2A6C506296284C52C5062A2C5062A6C50B8A58A0C52C5098A8B1418A58A20D6BA50DA822334AE38B45B5A013D5C49D805A76324A106E2ACB7A5871E4CA965748E5B43F8C8DCDD59922D432673E37B18E76DEC9F890DC9A058276AF52B8B873668E5E6DDDFA3D6EE474B2EB7C30C7C78F87EFFE9D837717445F7F35DF52B5678971A740F14323B36C0B3B0B2680BEF24847349D364AC726AD2279F883B465A1CEA0F6B5E39B87BEEC40F3B21539E5C536D35E0E863C19F1C538BF3E8E8784F1E6BC00F201F91F255F26BF6B87745BC1B8EF8CFB32976C788EB4C662D04756CB7CE4B060DEA180F3750E7D173F3466BB23BDA33D66F9E576BE9143F855C65F2C3269662E3269DF934BAC930BC9237EB46FD42C3072AA91BFA92C2E4B2E1F0FD7D33B87CED1D559506CE4CB225ECC4E31C600696B0DB8EDB7457306B36ED9CEDADC49544E61C49364924F53BAE9A49764715B6DDB1F8A8B2689A0D1BDFF0095A48EFE416B9658C7CB36430CE7E117A3E04F3CC81EA56996DC5782D47426FC97B45C0434E4E39770AA0B464DA6D522CE1D051772EE686B668B4D13A59086B1A3D4F403BC9EE5CECF9D422E52674384608F18E2BC5659C8F6AF73C340A04F70A07CE8AF33933CF2BFC9951C9B28E4B55102E49403251405C92806494050FEA8AD3B4457A3AAE01AD7CCD767470A00F2BBBE6BD9F46DCCB9E2D4FD7B39DB18941F635B15DB2B505258A0A41414828290505258A0A4B1414828314B144DA22D6C8D2ED9A0D9E7CA969CF6F1B48DFAAD2CB16CCED7430BF0834313C32273C901AF20BA470738EF679D9DFBD713C33D2F692FE4DD1C30319A864EF8A36C8C31C4F7168706BA3A2E3DC4389F40ACE4D994A2914F169C6126FC8C8DBA5300D3191F380F8DE7D9B5EEB7C65AE1F941EAD0B09E7729297D1B716B463171FB39FED2EB23D44A0C7663631AC176376389F91AF45A5CDBEFF66FF8F8766BC19F1CA43DAF374D686D0DB60493EB7F20B6C73B4D7EC579EB45A97DB3A5E11C51ACD0BDB24A0CEE1253473DF6006CB19CDE4959B31E38E28D157803DFA7D3B228DCE6B5AD03A59A1564D7334BA3AF823C1392391B7B33F91A8BEC5A9267BBF339C7E255A508AF08A32C939796478ACECC0292C5173430873C0772E7E6B4E59351EC58C10529D33ABD3462B65CA9C99DEC708D134D23236E4F7358D1D5C4347A95A6535156D9B7B229F10E24D6E9E59A174723A38DCE14E0E16075A5A32E74A0E517E0872495A3CA78B71D9B54C636639163DCEBE579550A1B6D47D579DCDB33CA92914A591C95339D7BB73E6A122284C9280649405C9280B928A0192034FB39A364FA86C723A9B45C77ACA85E23CFF756F4B0C72E651978319783B1D2C2D602C63435AD756DD7606FE6BDBEBE38638F182A48E54EDBB64D4AC18D0520A0A414148283141418A0A0A41418A0A3338DF198F49ECFDA7FD57E3B7468FCCFF2163D555D8DB8E1A4FD9D5E9BD232EF29BC7FEABFF91A4DA20106C1160F782ACA9292B473278DC24E32F28BDA67CB2B990FB431C7441C000E343FEE2B9FB3812B9A67574F69BAC6D185FC40D7B785C4C9208639257BC02F9B297A13C89F0F9AE79D4353B41AED54DA4862D142EF6DAC81AF73C7B91C31B98D2EF7CED672A039F32B5E4E4D544BDA2F0C67CF33ECBD7D9E6BA1964D2B258A401DEC83DCD20DB726121CDBF30B0C31943B32C753CF8361ACB8FB3F68D4E09AAFC4695BA823177B5742F1D32680E0E6F810EE5D085BCE41D46834818DBE6E7004FECBB1AF854237F67036F3CB24ABD22D62AC952ACA5A7E290C933A063C3A48C5B80E5CE8807A91D7CD6886CE39CDC13EE8BF9BA66C61C0B3CE35165DC56F2850520A256D836362160E9F93356BBA35747C5AA83F6F1D80F8AA79B1462B9597F06D3BA6729DB7ED1B3538C1092638DD938D0A73AA863D6859F55E47A86DC72BE11F08B7972F2548E558E239122C51ADB6EE5CD4DAF0CD3634A84419A559360200400802D00B6A280A1E46E36237046DBA9569DA147A8F67B873DFA789C5D79303AC9C892EDEFE6BDAEAE651C11EF6E8A7FD34A726FC1B917076F5B3FDF82CA5B2CB10D25ECB0DE16C1FA42D6F3CBECDCB563F42BF87B00248680059268003BD62F61A56D92F5A2BD1CAEAFB45A318E00B8B9E03B623165D175F22A84BAD4234932BCB0E3FA35A1D0C72B0490BF26B858A21C3C8F715D4C3BD1C8AD3B35CB513EF12A4FA573398DBBFA2B91C8A5E0A93C5287921C56766BA1714B1473FC7F83C724B1C924524FED0491FE678642D644E787D339DB80B2E35B85C9DDC69CED9E8FA56EE5C785C20EBB97784B5B0E9A3B710CC846D2EDFDE73A9AC07CF60AE6B4E31C6959CBDE53CB9A52A3A08207C4193B5A64B7B198B6EF191E185C7C1A1C5C7C02D5B39D34E06DD3D669AC965AED1F028B5903E27B18E798DED8DCF1961239AE6B5E3B8825503AA4D2CD1E8B4EC0EBC22632218EE766868E67C101E57AFD2E6C92366CD9E595EE2772DF696E26BAEE06DE2A082EF63F823CE97F0AD2D2F1AA9A424FBBEE064403AB7346CFA152833AFD2E93264AE36D1066DE5F98C79024781C7E6BA2F6AA2A8E42D27294AD994203AE074D1CCED3C98B5CF706E4434B438B4591DE05F8A6CE55285274CDBA1078B329B8A697D9CBEBBB32EE1BAC8869E53A8971F6AE662184C45D8103723AF55CAC185C322943C9E9F6FAAFF00518258B3C5716BFF000EDC05E8533C1C953A42E2A6C8A24A58D99D1CFF006B2501AC603EF645C478556FEABCEF5FCD518C13EE58C11FB399B5E54B204A9A60639C8912502AC1982004008010020353B2F346CD5C4668CCCC2E0DC46FEF3880D35D68F45BF5A515917256651F27B943A66B406B406B40A0000001DC005E8D3A5D8B4A0898314599D181DA9ED347A2680DC2498914CCAA9BD5CEAE4152DADC58576EEFE8D793228A382ED076AE4D5D01942CC307303B26B8DDDF21E0B8FB3BB3CBFB15A791CBF6303254CD258D2EB6488DC6F7328E5B13575575F159C32CE1FA5D129B47A3765F8D375AC313DA7DAC6C05E4E34EBDAC5557A2F49A1BFF002AA7E51B9259153345DC1DBD0BBE4BAEB659A1E944824E127A1F50B62D85ED1AA5A6FD32B6A5F2C313D8D8BDA7B405B7740022AFC79AD3B0BE4AE258D57F0A6A42E838745F878B4BAAF665ED904CD6666F263CC8C3B55D6C7BB654EDA67429497F258D2F190F7B991C3298E3C9AE700080E6F4681CED1BB76C94925486F0D93572652BF16B7DE6B62730C64F739CEA242824CCE29C29CCD2BE49DCE9256B811FCC91CD0D2E028035D091C901CCDB1C4D8C0B9E396ED6B3AEDCCF4F45041BBD916963DF288E491B5834B4379D83BD915B57AA906AF16E2F2867B3FC3BDA66B8DA5CE6036457217DE849CC6835E7432BCE31BDC40613648076E4473E407C161932282B93316D447E9F5AD9F5AE99F8090B03451B040E4D07AF53F1596A6D62966E3650DBCDCA1C626E52EED9CAA0A4B14498AC6D191C576AA5075068838B1ADD883477B07B8AF19D666A5B3D996F12FC4CBD331AF706B9E2307F510481E8B9F831C6735194A91B1BA468F69191B1D1C71B838322ADA8EF64D923A95D0EA70C70708637748C31B6EDB314B97328DA4328EAB389288D644820040080101D97F0BF84B66D4BA77EE34C039A3FFB1D601F8004F9D2BDA1894A7C9FA37618DBB67AE2EC96CA5C478A450B1CF7C9182D697517341240BA016AC99E115DDA3194D2F67844FAA323DD23B9BDC5C7CC9B5E6E6DC9B93F6507DD8C122C68C6877B45142851228A1469F03D442C9339A59E2A22BD88DC8BDECDEC3E056FC1C632B936BF826325176CF4CD3F6D740FFF00AD8FF9DAF6FCE97721BD85FB2CAD8C4FD9ABA5E25A79BFA5342FFF002BDA4FA5AB30CF097892335284BC3259A10B7C66633826604FC222F6ED90B05976FDC6C751C8ADAE31945B3429CA334AFB33138CF69CE8388E9B431C31360D43835C45B5D939C1A08ADB6247AAA85F2B7F1778C6A74B142FD34AE88FB5165B5BD07100F858080E9B8ACDED787193FF009208E4FF00706BBEE80E014106A716E3B270FE122587112CB290D2E01D56EABA3CF669424838BF1F74F0E97DA5197F0CC965C7602491AD34074DAB6E96A8E6DF863971F2689E6517460CB297735C6CFB33CBE5F62ACE6E5E462D09B4ED1ACD5E1FC72463866E2F66C0DEE40EF1E2BADA9D5B3639AE6ED1AA58D3F075FA699B2303D9BB5DB8DA97AEC39E3960A70F0CACD53EE79EC9AB95DF9A490F9B9DFBAF032DACD2F33653B7F6557BB758777DD9D5D7BF8D58C2E5346F1A5CA455085C9448C7152891AB200801002004074DC0F8D1D1467D800D92568CDC7DF26AC8C4726F3F1486DE4C76A1DBF731FEA387821D776875337E79A423BAC81E8282C259B24FF5499A65B137ECCA9097732493DEB04FB9AD49DDB2A114B71713BEE16805B5140324A144B16EB097634657E87E2B0B2B862A5368934B43C77550FF004E79001D09C9BE856FC7B5961E199C72CD7B37B43DB591CF6099AD77BEDF79BEE9E637A5D5D7EAEFF4CD79325964E4ACEAB8DF64F4FAC9E2D44DED3380873317602C39AE04EDBEED0BA1E4ED22D71DE01A7D73447A96191AD390193D9BEFBFBA47795204E27A56C5A17C2C14C8E0C1A2C9A6B1A0016773B0080F3A5041BFDA9D2C438640248C3DE702CBBA6B882E26B91D891BF7AA3D432F0C5DBCB35679544E2D79F6DBF2500500100203AFECDE8E46B6FDB02C2DC831B4E0093CEFA1F05EABA5E0CB187EBEDF4689B5F472782F23673E8AFA98AB71F15BA12F45ED7CBFEACAA5CB6D1706E4A689A12D480080550029009485CD5D6F9AFF0061636175D0BA46D2F257D8C6F035CFD93C5A42773CAD6B964451C9B092A45BF643C969E453591DF718622A791B94D313153666432C166D6719D1B619295114B091E4B352B2E6AE379E5C5118DCD0DCACCD99B5E58BBCBC0E6C44F42B1724557348B6D8E852D2E56CAB276EC762A2CC44C52C0629602AB7EEDD4A74EC947B5453DC2D939DC6D77A8057ACC6EE099DC83B8A3CE753FC53747AF3A73034C0C98C0F7590FB0EC4B80E540DEDD6966647A0F1BFFDB4BFFE4EFA203CD62664E0D1CDCE0DF534A083AAFE20691C74F1963096C24E447E96D068DBA8FA52E6F53849C134BC1A3622DA3CF9708A42A00402203A8E05C461823AA94B9DEF3B667E6AADB7E4BB9A3D4F5F561C7B9AA69B66060BCE594681CDD94A7DC98AEE8C457CEB2F02969001E87928B22D37422937E18C252A9760435CE3C5D0E589802924443ADD33FD8B3C246EFF0087DD6AD8F08A7D717E93471556CF3D418258A1704B1435D15A9E466A4D11BA3A59291B94932A6B3A05BB19DDE8F0EF2657D27F507915B67FA0B5D515E0668E2AAD9E68314B018A59018A581AEA0A57726885DA86ACD4199703D6F81CF9F0F89E37FE401F168C7ECBD3EABFED46FE8EB627F823C0BB4E31E23A8F0D53DDEAFCBEEB79B4FA178BBBFF004721EF84FCC290711D9C873D5443B9D97FB4177D941076FDA39B0D2CA7BD859FEEF77EEB19D38B4255478FBE66824640D751B85E5F26371934BB9CC9766427554FAFD3577E2A387E25DC5A9F2E2E51F24D13F2B3E2B092A35ECE0F86932C43159DF92D729522A365DA55ECC46E2A6CA7418258A21974A31706800B852D91CAED5B36466EED95F8869406023F40AF82D98B25CBF92E6925932F17ECA1246006D1B2459F0DD58526CECEA6A2E5259178207BA96688CBD3EA4DA7D8B3F867D5E24822F6DF6F82D7CE37E4E439A4E856699C790E5F0FECA39C510E690BAA8700D1D4D92A212E4D9D6E932E5C87F051EF3FC82C767F4A3575A5DA2CD6C553B3CF50629628314B1418A58A0C12C9A2A6B3445DBB798E8B763CA976675BA76F4705C66BB332E2616CCD0E041BADFC55B6EE0E8EBEDCE197049C5D9AF8AA567990C52C062960314B047343616CC6FF0024898F92849A31560FEFE9D7AAED62D68D77765E8E355DD8ADD3CA00C6491B5D039ED15DF56AD7E38D5AF46DED1444FE1A5C72712E71E64EE49EF3E2B9D93A8B7DA25796C37E0D1FC66B31C0EA272D22882F738577515A7FAD9FD9AFE797D95D82706DB2CAD3DED739BF42A1EE49FB0F33FB091B33C53E599E0F473DEE1E84AC5ED49F66CC7E56FD91B7872D4F398F320D4C583C0FF083F32B6425CA3677FA5BFED32F70D71DC7915A732F068EAF1FD3245F6C87C156691C4B63C4BE0A3893C8B182D5669A0C12C506096286BE2B041E4452CA32A76678E4E12525E8E7B51018DD89F87885D184D495A3D8EBE78E6872895265B626D91D56985B1A7FC23E8B9791FE6CF179E35925FC8E2C0B1B35995C6B9B7C8FD55BD7FD27A0E8EBF0910703FEA387F83EE167B3FA10EAEAE0BF936F1544F3F418A58A0C52C50B4A2C50520A1714B22847C21DCC0346C78152A6D7866719CA2A93F231D0772953098C2C595922629648628286178EF1B7C55AC7A9967E11B2386522373FC3BFC574716938F7949962186BCB182BBF6D874E7E1E0BA05826634F850F8FA15C9DDF83D792A6650FFA3F15CBB2B05258A129050B4828C4E20EFE71F0007C95EC4BFB68F4BD363585163869F7EBBC2D7997E261D56378AFE8D3C554B3CE8B8A5906862ABD8A0C52C50629628314B146471F03DCEFDFD3657757C33B9D1EFF002306657A27664755C2CE50B0FF00800F4DBECB95B1DB233C9EDC6B349164B16AB2B5185C6FFA807737EE55FD6FD07A3E951AC4D90F01FEB1FF0021FA85B367FC663D555E35FC9D0E2B9B679EA0C52C50629628314B142E0A2C50A189628762A2C5062962842CB4B044E83B966A4491962CE32A768944434A3FBE7EABA50EA725D9A2C4761FB227E9DC01237D8EDFF956F1F51C7374D51B239E2C656C79F872F991DCAFF9378F13D019572DF71CFC972F374E6DDC595A782FBA17DB03C9519EBCE1FA91A5E371F234CAB0E0388DF6AB2E03887B551C07130B56FF00E73BCFEC174210FC11E8B49D6248B5C35FFCC1F1FA15A7347F0237FBE166EB57399E6A87E2B1B20B8B4811005A00B520E7B8D4D94B5D1A2BE3CCAE8EBC2A1FC9E97A6E3E18AFECCA955A897D9D27679D7037C0B87CD73B717F70F33D4635999A4AA144E738CBAE6778003E5FF2BA7817E08F4FD3A35817EE47C04FF3FF00D0EFB2CF67FC46AEA7FE23A55CA3CF02902D28014840AA00201500200402201AF6A94C223A5999157553FE96917D6EE88EED975F474FFDE659C38BDB2B376DB707E9EBBAEC164AF23AF7BADBAF7F8EEA4511C0D37E0057DB6F454F76494544D79292A252B9C6812D48B435AFBFEFA218DD91BB44D73B220D9F1D966B2B4A916A1B338478A2CC30341B0D0085A6736D7735CF3CE4A9B34210A9CCACCB002D4624A4AC2882374B4B350B26885DA90B62C6286BF520027B85ACA38ADD1B210E4D23987CD9124F326FD575163A547AAC6946292F44323D66A04B91BBD9D9AA223FC67ECA86DC2E6703A8ABCA6A7B7553E22871399D64F948E3DEE2BA98F1D4523D4EBAE38A2BF61782C953FF00A1DF64D887F6CABD47BE33A1FC42E77C470788A2751F18E23DB32C5E323892B645ADC688A2405624028205400804B4A02170F4534C810BAF653C5928A5ACD4D6C0D0BA27F6FEFAAEC69695FE732D62C5ED95B1BEE6DEFCEF7ADA815D82D0AC3E06CEC68002EBE5FF002A40D963EA0D8ABAEB89AE7E2A6C9268B4B43C4EFCAB9AF3FB5B1CF23FD8A79277203A75A16430E437F0AB2F948B01A54F9458F1A758BCA4F224640B0790C7913B194B539598B64802C081B295940945299CACC119A4572E5BD24674887500B9A40E6452CE1499B71494669BF4669D03FC3D55AF962753FAEC6559F4EF1CDA7EBF45B2338BF66E59E12F0CD4E140B63A20825C4EFB2AD9E9C8E56DC94B2593C92B85F5DB6F3EE5A945153BA97F262395D55477F165B825EC9F857F57FD07EA1639EB815B6E7CB19B16A9D2397428728A407B5E562D220B30B8AD1348C1975855591AC7AC4804032C924777259D2A208E424EFB8A04FD3E756B38D2EC43B62C70EDBF33B9FD9253EFD828904F262316F8D9FB7D07C17574F4F935927FF116F0E1F6CAA4574BF88DC5FC975D16C6B451E60927CA8D505205143BB73DD5DE7F650096019B86E6AC93CB90E9F45577337C589BF6CD7965C6268E2BCCD9404C52C5860962C304B1618A58B1715005A4014804736D4A60AEF856E8CCC9321769D6C590CB90C3A7597C84F210C0A7E41C8043BD7F749F218F3EE3FF000CB1F949E41F844F9872B2A6A38435C6F704F3AA5B61B6D2A2E62DD941555D0FD3F0C6C7C8593D4EE525B0E46AC9B12C9E49BF0EB0F94D3C851A751F20E43DBA758BCA472278E15A653316C9DAD5A9B311D4A2C80A4B01496029014B53AA1F95BE562B9F705D9D2D1FF79FFE16B161F6CA8D6F7D38723E9FF85D92D0E69F874DF95F78DBBBE88069A06C56E2F738FA6C80570E7B74E944788BE480BFA28316EFCCFC765E77A8E7E7938AF08A59E772AFA2C52E7D9A0292C0528014A6C052580A4B014960292C0B4A0098A9B0260964D89829E42C0C4A54C862361011CD81F82C6C9B0C12C060962C4F66A790B0F669C8587B34E42C50C516458B8A8B02D200A40148029014B57A8FD2D35D09FB2ED6968F89E4FF0088B58B0FB653C4D1DC1DABFBF5F92EC9682BA1A3B51FDEBF74004791F8006BC7E5E96805076DB9F7556E28EDFF003DE807E9E20F2DF5BBE6DF82ADB79962C6D9AF24B8C6CD5A5E59BB7673DB0A5008C49B90ED88F420F22B3E1E1A31E43A2758BF81F31B151254E894FB0A1C1453162D280148485200A50071611B10410B27092F28530A4E2FE8530A4E2FE8530A4E2FE8530A4E2FE8530A4E2FE8530A4E2FE8530A4E2FE8530A4E2FE8530A4E2FE8530A4E2FE8530A4E2FE8530A4E2FE8530A51C5FD0A6149C5FD0A6149C5FD0A614A78CBE853296AF53FA5A4F793F6F25DAD1D0AFCF22FE116B0E1F6CA388BEFB167AF5FF95D8F05A1BD76AE75DD7E1DFDE807BAFC36F0AFEF9A5011AE1DFCB71B63D528003EBBDD14A0696861A6E5BDBBE9D3EABCF751CAE73E2976452CF26DD16715CDE32FA34530A4E32FA14C8E586C83DD60FF00948DC7D3D16C85ABEC62E2C0427E1913EA6D2DFD0E2C6C9012E046D5CFBCDFEDF72B28B69534438BB1EC8C8147A058356FC19531ED69ADF9AC5C5DF814C5C54717F44D31591176C013E40952A137E130A2D9E8737E62BD6CFF00533AAFC8C589008400402A0110020150020040080100200402201500C9391F23F44F60C83C87F97EEBA28DDE87F56F9292089DCFFD5FBA804BD4A203072F5524891F5F350C866C47C8790FA2A13F26A1CB102A01100A848884020040080B1A4E67C96EC46703FFD9, 0)

IF(SELECT COUNT(*) AS UnMatchedMedia
FROM dbo.GetMapMedia(2) AS retTable
	FULL OUTER JOIN (SELECT *
	   	  FROM #temp) AS expected ON (retTable.Images = expected.[Images])
WHERE (retTable.Images IS NULL OR expected.[Images] IS NULL))
	 > 0	PRINT 'Failure, didn''t return correct MiniGameMedia'ELSE	PRINT 'Success, correct MiniGameMedia returned'
DROP TABLE #temp; --drop temp table
	PRINT '-----------------------------------------------------------'

/**********************************************************************
* Purpose: Tests the IsExistingUser function. Given an existing username
* return that it does exist.
***********************************************************************/
BEGIN TRY
	IF (dbo.IsExistingUserName('fakeUser1@gmail.com') = 1)
		PRINT 'SUCCESS: the function said the username already existed.'; 
	ELSE
		PRINT 'FAILURE: the function said the username did not already existed.'; 
END TRY
BEGIN CATCH
	PRINT 'Error ' + CONVERT(varchar, ERROR_NUMBER(), 1) + ': ' + ERROR_MESSAGE(); 
END CATCH
PRINT '-------------------------------------------------------------------';

/**********************************************************************
* Purpose: Tests the IsExistingUser function. Given a non existing username
* return false.
***********************************************************************/
BEGIN TRY
	IF (dbo.IsExistingUserName('fakeUser1@gmail.co') = 1)
		PRINT 'FAILURE: the function said the username already existed.'; 
	ELSE
		PRINT 'SUCCESS: the function said the username did not already exist.'; 
END TRY
BEGIN CATCH
	PRINT 'Error ' + CONVERT(varchar, ERROR_NUMBER(), 1) + ': ' + ERROR_MESSAGE(); 
END CATCH
PRINT '-------------------------------------------------------------------';

/**********************************************************************
* Purpose: Tests the IsValidPassword function. Given a valid password
* for a given username, return true.
***********************************************************************/
BEGIN TRY
	IF (dbo.IsValidPassword('fakeUser1@gmail.com', 'WeJcFMQ/8+8QJ/w0hHh+0g==') = 1)
		PRINT 'SUCCESS: the function said the password was valid.'; 
	ELSE
		PRINT 'FAILURE: the function said the password not valid.'; 
END TRY
BEGIN CATCH
	PRINT 'Error ' + CONVERT(varchar, ERROR_NUMBER(), 1) + ': ' + ERROR_MESSAGE(); 
END CATCH
PRINT '-------------------------------------------------------------------';

/**********************************************************************
* Purpose: Tests the IsValidPassword function. Given an invalid password
* for a given username, return false.
***********************************************************************/
BEGIN TRY
	IF (dbo.IsValidPassword('fakeUser1@gmail.com', 'WeJcFMQ/8+8QJ/w0hHh+0g=') = 1)
		PRINT 'FAILURE: the function said the password was valid.'; 
	ELSE
		PRINT 'SUCCESS: the function said the password was not valid.'; 
END TRY
BEGIN CATCH
	PRINT 'Error ' + CONVERT(varchar, ERROR_NUMBER(), 1) + ': ' + ERROR_MESSAGE(); 
END CATCH
PRINT '-------------------------------------------------------------------';

/**********************************************************************
* Purpose: Tests the GetProfileProgressInfo function. Ensures that
* the correct CurrentMap, CurrentNode and AnimalID for a certain ProfileID
* is returned.
***********************************************************************/
BEGIN TRY
	CREATE TABLE #temp(CurrentMap INT, CurrentNode INT, AnimalID INT)
	INSERT INTO #temp
	VALUES (3, 6, 4);
	IF (SELECT COUNT(*) AS UnMatchedProgress
		FROM dbo.GetProfileProgressInfo(3) AS returnTable
		FULL OUTER JOIN (SELECT * FROM #temp) AS expected ON
			(returnTable.CurrentMap = expected.CurrentMap 
			AND returnTable.CurrentNode = expected.CurrentNode AND 
			returnTable.AnimalID = expected.AnimalID)
		WHERE (returnTable.CurrentMap IS NULL OR returnTable.CurrentNode IS NULL OR 
			   returnTable.AnimalID IS NULL) OR (expected.CurrentMap IS NULL OR 
			   expected.CurrentNode IS NULL OR expected.AnimalID IS NULL)) > 0
		PRINT 'FAILURE: did not return correct ProfileProgress information'
	ELSE
		PRINT 'SUCCESS: the correct ProfileProgress information was returned'
END TRY
BEGIN CATCH
	PRINT 'Error ' + CONVERT(varchar, ERROR_NUMBER(), 1) + ': ' + ERROR_MESSAGE(); 
END CATCH
DROP TABLE #temp;
PRINT '-------------------------------------------------------------------';
